---
title: "Omnidesk"
description: "Подключите бота к Omnidesk и начните обрабатывать обращения пользователей"
---

Вы можете самостоятельно настроить интеграцию с Omnidesk и начать обрабатывать обращения пользователей с использованием нашего бота.

<Steps>
  <Step title="Создайте метку Wikibot">
  Добавьте новую метку в Omnidesk по пути: аккаунт администратора → раздел «Каналы» → подраздел «Метки» → кнопка «Добавить метку». 
  Wikibot будет обрабатывать только те обращения, которые содержат эту метку. После перевода на оператора, эта метка снимается с помощью запросов в адрес API Омнидеска. 
     <img
      src="/images/integrations-omnidesk-label.jpg"
      alt="omnidesk label"
    />
  </Step>
   <Step title="Настройте интеграцию">
    На [портале](https://app.wikibot.pro) перейдите в раздел **Интеграции** своего бота и включите интеграцию Omnidesk.
    Заполните API секцию:
      - **Домен** – Ваш домен Omnidesk.
      - **Почта** – почта сотрудника в Omnidesk.
      - **API ключ** – создаётся по пути: аккаунт администратора → раздел «Настройки» → подраздел «API» 
      <br/>(на странице `https://<ваш_домен>.omnidesk.ru/admin/settings/api/#`).

    Если все три параметра заполнены верно, появится возможность выбрать агента и метку:
      - **Агент** – сотрудник, на которого будут переводиться обращения, в случае если бот не нашел ответа, либо пользователь позвал оператора.
      - **Метка** – выберите метку, созданную на первом шаге.
    <Note>
      Можно выбрать пункт **Посылать ответ как заметку**, тогда ответ бота будет видеть только агент, пользователь видеть не будет.
    </Note>

    Нажмите **Добавить**, чтобы сохранить интеграцию.

  </Step>
  <Step title="Скопируйте Webhook">
    В настройках интеграции скопируйте в буфер обмена Webhook URL Вашего бота.    
    <img
      src="/images/integrations-omnidesk-webhook.jpg"
      alt="omnidesk rules"
    />
  </Step>
  <Step title="Настройте правило для входящих обращений">
    В Омнидеске добавьте правило для входящих обращений по пути: аккаунт администратора → раздел «Каналы» → подраздел «Правила» → вкладка «входящие обращения» → кнопка «Добавить правило» 
    или на странице `https://<ваш_домен>.omnidesk.ru/admin/channels/rules`.

    Нужно задать условие выполнения:
      - Статус — равен — открытое.
  <img src="/images/integrations-omnidesk-rules.jpg" alt="omnidesk rules" />

  Необходимо добавить два действия: 
    - Выполнить вебхук – укажите URL, скопированный на предыдущем шаге.

    Галочками отметьте поля `id обращения`, `изначальный текст обращения` и `ID пользователя`.

    - Добавить метку - укажите метку, созданную на первом шаге.

    Боту будут передаваться входящие обращения и исходящие, созданные сотрудниками.

  </Step>
   <Step title="Настройте правило на измененные обращения">
     В Омнидеске добавьте правило для изменённых по пути: аккаунт администратора → 
     раздел «Каналы» → подраздел «Правила» → вкладка «изменённые обращения» → кнопка «Добавить правило» 
     (на странице `https://<ваш_домен>.omnidesk.ru/admin/channels/rules`).
      <img
      src="/images/integrations-omnidesk-rules2.jpg"
      alt="omnidesk rules"
    />
    Нужно задать два условия выполнения в блоке «ВСЕ заданных условия»:
      - Изменения выполнены пользователем.
      - Метки содержат метку, созданную на первом шаге.
    
    Необходимо добавить одно действие:
      - Выполнить вебхук – укажите Webhook URL.

    Галочками отметьте поля `id обращения`, `текст последнего ответа` и `ID пользователя`.

    Если бот не сможет ответить на обращение, то оно будет переведено на сотрудника.
    При закрытии обращения и повторном его открытии по инициативе пользователя, обращение попадет снова на бота.

  </Step>
 
  <Step title="Проверьте работу бота">
    Ваш чат-бот для обработки обращений готов! Проверьте его работу в любом из каналов Omnidesk.
  </Step>
</Steps>

Если у вас остались вопросы по интеграции, [напишите нам](https://t.me/use_wikibot).
